commit 4352a8554f3765b98d27c1a0b1a170414f82b199
Merge: 388ccda 660bbf4
Author: bors <bors@rust-lang.org>
Date:   Tue Mar 8 01:04:36 2016 +0000

    Auto merge of #31986 - ashleysommer:emscripten_fixes, r=alexcrichton
    
    Fix building libstd on emscripten targets.
    
    The main cause of the problem is that libstd/os/mod.rs treats emscripten targets as an alias of linux targets, whereas liblibc treats emscripten targets as musl-compliant, so it gets a slightly different struct stat64 defined.
    This commit adds conditional compilation checks to use the correct timestamp format on fs metadata functions in the case of compiling to emscripten targets.
    
    This commit also depends needs https://github.com/ashleysommer/rust/commit/f1575cff2d631e977038fdba3fa3422ba5f8f2fe applied in order to successfully build libstd with emscripten target.
rustc: ./html5ever-2015-05-15
cargo rustc -- -Ztime-passes -Zinput-stats
    Updating git repository `https://github.com/reem/rust-mac`
    Updating registry `https://github.com/rust-lang/crates.io-index`
    Updating git repository `https://github.com/servo/string-cache`
   Compiling winapi v0.2.5
   Compiling mac v0.0.2 (https://github.com/reem/rust-mac#6316d3f4)
   Compiling lazy_static v0.1.15
   Compiling winapi-build v0.1.1
   Compiling phf_shared v0.7.13
   Compiling num v0.1.31
   Compiling rustc-serialize v0.3.18
   Compiling void v1.0.1
   Compiling libc v0.2.8
   Compiling unreachable v0.1.1
   Compiling debug_unreachable v0.0.6
   Compiling phf v0.7.13
   Compiling kernel32-sys v0.2.1
   Compiling rand v0.3.14
   Compiling log v0.3.5
   Compiling time v0.1.34
   Compiling serde v0.6.15
   Compiling phf_generator v0.7.13
   Compiling string_cache_shared v0.1.12
   Compiling phf_macros v0.7.13
   Compiling string_cache v0.1.17
   Compiling html5ever_macros v0.0.0 (file:///root/benchmarks/html5ever-2015-05-15)
Build failed, waiting for other jobs to finish...
makefile:2: recipe for target 'all' failed
done
